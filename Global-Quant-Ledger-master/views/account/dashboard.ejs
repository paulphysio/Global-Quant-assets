<%- include ('../partials/dashboard-header.ejs') %>

<!--GET LAST ITEM IN ARRAY-->
<% const getLastItemInArray = (array) => { %> 
  <% return array[array.length - 1] %>
<% } %> 
<% const deposits = currentUser.deposits %>  
<% let lastDeposit = getLastItemInArray(deposits) %> 
<% const withdrawals = currentUser.withdrawals %>  
<% let lastWithdrawal = getLastItemInArray(withdrawals) %> 


<% const numberWithCommas = (amount) => { %>
  <% if(amount !== null) { %> 
    <% return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); %>
  <% }else { %>
    <% return ''; %>
  <% } %> 
<% } %>

<!--CHECK IF VALUE EXISTS AND RENDER-->
<% const checkIfValueExistsAndRender = (val) => { %>
  <% if (val !== null || !val) { %>
    <% return val; %>
  <% } %> 
  <% return ''; %>
<% } %>

<div class="flex flex-col flex-wrap md:flex-row">

  <!--ETH BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.ethBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">Eth balance</p>
      </div>
      <div>
        <img class="w-6" src="/images/crypto/eth.svg" alt="">
      </div>
    </div>
  </section>

  <!--BTC BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.btcBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">Bitcoin balance</p>
      </div>
      <div>
        <img class="w-10" src="/images/crypto/bitcoin.svg" alt="">
      </div>
    </div>
  </section>

  <!--XRP BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.xrpBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">XRP balance</p>
      </div>
      <div>
        <img class="w-6" src="/images/crypto/xrp.svg" alt="">
      </div>
    </div>
  </section>

  <!--XLM BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.xlmBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">XLM balance</p>
      </div>
      <div>
        <img class="w-6" src="/images/crypto/xlm.svg" alt="">
      </div>
    </div>
  </section>

  <!--XDC BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.xdcBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">XDC balance</p>
      </div>
      <div>
        <img class="w-6" src="/images/crypto/xdc.jpg" alt="">
      </div>
    </div>
  </section>

  <!--ALGO BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.algoBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">ALGO balance</p>
      </div>
      <div>
        <img class="w-6" src="/images/crypto/algo.jpg" alt="">
      </div>
    </div>
  </section>
          
  <!--MIOTA BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.miotaBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">MIOTA balance</p>
      </div>
      <div>
        <img class="w-6" src="/images/crypto/miota.jpg" alt="">
      </div>
    </div>
  </section>


  <!--ADA BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.adaBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">ADA balance</p>
      </div>
      <div>
        <img class="w-6" src="/images/crypto/ada.jpg" alt="">
      </div>
    </div>
  </section>

  <!--HBAR BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.hbarBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">HBAR balance</p>
      </div>
      <div>
        <img class="w-6" src="/images/crypto/hbar.jpg" alt="">
      </div>
    </div>
  </section>

  <!--QTUM BALANCE-->
  <section class="basis-1/3 border-2 border-black self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">
    <div class="flex justify-between items-center">
      <div class="flex flex-col self-start">
        <p class="text-black-100 text-3xl md:text-2xl font-bold"><%= numberWithCommas(currentUser.qtumBalance) %></p>
        <p class="text-gray-900 text-base md:text-base font-semibold">QTUM balance</p>
      </div>
      <div>
        <img class="w-6" src="/images/crypto/qtum.jpg" alt="">
      </div>
    </div>
  </section>

    <!-- TRANSACTIONS -->
  <section class="flex-col basis-3/5 border-2 border-black  self-stretch md:self-start items-center rounded-xl m-4 py-10 px-6">

    <div class="flex flex-col space-y-2">
      <div class="flex items-center space-x-2">
        <p class="text-gray-900 text-base md:text-base font-semibold my-2">Recent  Activity
        </p>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-700 font-medium rounded-full p-1">
          <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" />
        </svg>
      </div>

      <div class="flex justify-between mb-1">
        <p class="text-gray-900 text-base md:text-sm font-semibold">Type</p>
        <p class="text-gray-900 text-base md:text-sm font-semibold">Amount</p>
        <p class="text-gray-900 text-base md:text-sm font-semibold">Date</p>
        <p class="text-gray-900 text-base md:text-sm font-semibold">Status</p>
      </div>

      <% if(deposits.length >= 1) { %>
        <div class="flex justify-between space-x-1.5 bg-gray-100 pl-1.5 pr-4 py-2 -mx-6">
          <p class="flex items-center text-gray-900 text-sm md:text-sm font-semibold">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-green-500 mr-2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 4.5l15 15m0 0V8.25m0 11.25H8.25" />
            </svg>
            
            Wallet Funding
          </p>
          <p class="text-gray-900 text-sm md:text-sm font-semibold"><%= numberWithCommas(lastDeposit.amount) %> <%= String(lastDeposit.wallet).toUpperCase() %></p>
          <p class="text-gray-900 text-sm md:text-sm font-semibold"><%= checkIfValueExistsAndRender(String(lastDeposit.date)).substring(4, 15) %></p>
          <p class="text-gray-900 text-sm md:text-sm font-semibold"><%= lastDeposit.status %></p>
        </div>
      <% } %>
      <% if(withdrawals.length >= 1) { %>
        <div class="flex justify-between space-x-1.5 bg-gray-100 pl-1.5 pr-4 py-2 -mx-6">
          <p class="flex items-center text-gray-900 text-sm md:text-sm font-semibold">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-red-500 mr-2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" />
            </svg>
            
            Withdrawal</p>
          <p class="text-gray-900 text-sm md:text-sm font-semibold"><%= numberWithCommas(lastWithdrawal.amount) %> <%= String(lastWithdrawal.wallet).toUpperCase() %></p>
          <p class="text-gray-900 text-sm md:text-sm font-semibold"><%= checkIfValueExistsAndRender(String(lastWithdrawal.date)).substring(4, 15) %></p>
          <p class="text-gray-900 text-sm md:text-sm font-semibold"><%= lastWithdrawal.status %></p>
        </div>
      <% } %>
    </div>
  </section>
</div>

<%- include ('../partials/dashboard-footer.ejs') %>